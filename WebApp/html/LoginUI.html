<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <script src="//www.google.com/jsapi"></script><script>window.parent.maeExportApis_();</script>
    <title>Paws and Claws</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 
</head>

<style>
  <?!= include('css/loginCSS')?>
</style>

<body>
   <div id="loginInterface">
        <center>
            <H2>Welcome to</H2>
            <img id="tLogo" src= "https://zxqbug.bn.files.1drv.com/y4mHkrhV62YcBzQfBS3Tso5iSTELyIYicuJAp8_x6M-BJfXhrpbrLGXorCS1asKFcLdZG0xcRMjLnJuzcRJoQUIegklSal8uOkMuMGkjHSytYI5xkjPmHpNQwlfoS4_rhMriF_Ow1ucxopjA2oLNyBhUAV4XGuPRj0CF7c-KWVblh9qtakZH6-ewknl4BtzR5Uvxv2zBXy6SMUl22pANI7hHA?width=500&height=500&cropmode=none" height="400px" width="400px">
            <div>
                <label for="example-code-input" style="font-size:24px">Username:</label>
                <div>
                    <input type="email" placeholder="Enter Username" id="codeInput" class="playercode-field">
                </div>
                <label for="example-code-input" style="font-size:24px">Password</label>
                <div>
                    <input type="password" placeholder="Enter Password" id="passwordInput" class="playercode-field">
                </div>
            </div>
            <p id="feedback" class="feedback-msg"></p>
            <button type="button" id="loginBtn" class="btn btn-primary btn-lg btncolortheme">
                Login
            </button>
            <br>
            <br>
            <button type="button" id="signUpBtn" class="btn btn-primary btn-lg btncolortheme">
                Sign Up
            </button>
            <br />
            <br>
            <p><i>Version 2</i></p>
            <p><i>&copy; 2019 The master of doors</i></p>
        </center>
    </div>
 
    <script>
        var loginBtn = "loginBtn";

        document.getElementById(loginBtn).onclick = function(e) {
            // checks if the feild is empty
            if(document.getElementById("codeInput").value == "" && document.getElementById("passwordInput").value == "") {
                document.getElementById("feedback").innerHTML = "Please enter a username and password and try again";
                return false;
            } else if(document.getElementById("passwordInput").value == "") {
                document.getElementById("feedback").innerHTML = "Please enter a password";
                return false;
            } else if(document.getElementById("codeInput").value === "") {
                // display error message
                document.getElementById("feedback").innerHTML = "Please enter a username and try again.";
                return false;
            }

            // change the button to have loading icon and change the text to please wait
            document.getElementById(loginBtn).innerHTML = '<i class="fa fa-spinner fa-spin"></i> Please wait...';

            // opens the next window
            var baseURL = <?=ScriptApp.getService().getUrl()?>;
            window.open(baseURL+"?player="+document.getElementById("codeInput").value, "_top");
        }

        // hitting the 'return' key should auto-trigger the login
        document.onkeypress = function(e) {
            if(e.key === "Enter") {
                e.preventDefault(); // prevents page from attempting to load
                document.getElementById(loginBtn).click(); // trigger button click event
            }
        }
        
        //Code executed to prepare page after everything is loaded
        document.getElementById("codeInput").focus(); //put focus on the code entry field
    </script>
  </body>
</html>